# æ‹ç…§å¼•å¯¼Agentä½¿ç”¨æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºè®¡ç®—æœºè§†è§‰å’ŒAIçš„æ™ºèƒ½æ‹ç…§å¼•å¯¼ç³»ç»Ÿï¼Œèƒ½å¤Ÿï¼š

- **å®æ—¶åˆ†ææ‰‹æœºæ‹ç…§ç”»é¢**çš„æŠ€æœ¯å‚æ•°ï¼ˆæ›å…‰ã€æ„å›¾ã€å…‰çº¿ã€æ¸…æ™°åº¦ç­‰ï¼‰
- **æä¾›å…·ä½“å¯æ‰§è¡Œçš„æ‹æ‘„å»ºè®®**ï¼ˆå¦‚"å‘å·¦2æ­¥"ã€"è¹²ä¸‹30cm"ã€"æ‰‹æœºå€¾æ–œ15åº¦"ï¼‰
- **èåˆä¸“ä¸šæ‘„å½±çŸ¥è¯†**ï¼ŒåŸºäºæ‘„å½±ä¹¦ç±å†…å®¹è¿›è¡Œdomain-specificæŒ‡å¯¼
- **æ”¯æŒReact Nativeé›†æˆ**ï¼Œé€‚ç”¨äºç§»åŠ¨åº”ç”¨å¼€å‘

## æ ¸å¿ƒç‰¹æ€§

### ğŸ” å›¾åƒæŠ€æœ¯åˆ†æ
- **æ›å…‰åˆ†æ**: äº®åº¦åˆ†å¸ƒã€åŠ¨æ€èŒƒå›´ã€æ¬ æ›/è¿‡æ›æ£€æµ‹
- **æ„å›¾åˆ†æ**: ä¸‰åˆ†æ³•ã€å¯¹ç§°æ€§ã€è§†è§‰é‡å¿ƒã€çº¿æ¡æ£€æµ‹  
- **å…‰çº¿åˆ†æ**: å…‰çº¿æ–¹å‘ã€è‰²æ¸©ã€é˜´å½±/é«˜å…‰åˆ†å¸ƒ
- **è´¨é‡è¯„ä¼°**: æ¸…æ™°åº¦ã€æ¨¡ç³Šåº¦ã€å™ªç‚¹æ°´å¹³
- **é¢œè‰²åˆ†æ**: è‰²å½©å¹³è¡¡ã€ä¸»å¯¼é¢œè‰²æå–

### ğŸ’¡ æ™ºèƒ½æ‹æ‘„æŒ‡å¯¼
- **ä½ç½®è°ƒæ•´**: "å‘å·¦ç§»åŠ¨2æ­¥"ã€"å‰è¿›1ç±³"ã€"è¹²ä¸‹30cm"
- **è§’åº¦è°ƒæ•´**: "æ‰‹æœºå‘ä¸Šå€¾æ–œ15åº¦"ã€"é€†æ—¶é’ˆæ—‹è½¬45åº¦"ã€"ä»°æ‹30åº¦è§’"
- **æŠ€æœ¯è®¾ç½®**: "å¼€å¯äººåƒæ¨¡å¼"ã€"è°ƒæ•´æ›å…‰+1æ¡£"ã€"ä½¿ç”¨å¤œæ™¯æ¨¡å¼"
- **æ„å›¾ä¼˜åŒ–**: "å°†ä¸»ä½“ç§»è‡³å³ä¾§ä¸‰åˆ†çº¿"ã€"ä¿æŒåœ°å¹³çº¿æ°´å¹³"

### ğŸ“š æ‘„å½±çŸ¥è¯†èåˆ
- åŸºäºã€Šæ‹¿èµ·æ‰‹æœºï¼Œäººäººéƒ½æ˜¯æ‘„å½±å¸ˆã€‹ç­‰ä¸“ä¸šä¹¦ç±
- é’ˆå¯¹ä¸åŒåœºæ™¯ï¼ˆäººåƒ/é£æ™¯/ç¾é£Ÿ/å»ºç­‘ï¼‰çš„ä¸“ä¸šå»ºè®®
- é¿å…ç†è®ºåŒ–ï¼Œä¸“æ³¨å…·ä½“å¯æ“ä½œçš„æŒ‡å¯¼

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\\Scripts\\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. é…ç½®APIå¯†é’¥

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„OpenRouter APIå¯†é’¥
OPENROUTER_API_KEY=your_actual_api_key_here
```

### 3. åŸºæœ¬ä½¿ç”¨

```python
from photo_guide_agent import PhotoGuideAgent

# åˆå§‹åŒ–agent
agent = PhotoGuideAgent(api_key="your_openrouter_api_key")

# åˆ†æå›¾ç‰‡å¹¶è·å–æŒ‡å¯¼
guidance = agent.generate_guidance(
    image_path="your_photo.jpg",
    scene_type="äººåƒ",
    user_intent="æ‹æ‘„è¯ä»¶ç…§"
)

# æ‰“å°å»ºè®®
for suggestion in guidance['basic_suggestions']:
    print(f"â€¢ {suggestion}")
```

### 4. React Nativeé›†æˆ

```python
from photo_guide_agent import PhotoGuideAgent, ReactNativeInterface

# åˆå§‹åŒ–æ¥å£
agent = PhotoGuideAgent("your_api_key")
rn_interface = ReactNativeInterface(agent)

# åˆ†æbase64å›¾ç‰‡
result = rn_interface.analyze_camera_frame(
    base64_image=base64_data,
    scene_type="äººåƒ"
)

# è·å–åœºæ™¯æŠ€å·§
tips = rn_interface.get_scene_specific_tips("é£æ™¯")
```

## æµ‹è¯•å’Œæ¼”ç¤º

### è¿è¡Œå›¾åƒåˆ†ææµ‹è¯•
```bash
source venv/bin/activate
python test_opencv_analysis.py
```

### è¿è¡ŒReact Nativeæ¼”ç¤º
```bash
source venv/bin/activate  
python react_native_demo.py
```

### æŸ¥çœ‹ç¤ºä¾‹ä½¿ç”¨
```bash
source venv/bin/activate
python example_usage.py
```

## APIæ¥å£è¯´æ˜

### PhotoGuideAgent ç±»

#### `analyze_image_technical_params(image_path)`
åˆ†æå›¾ç‰‡çš„æŠ€æœ¯å‚æ•°

**è¿”å›æ ¼å¼:**
```json
{
  "basic_info": {
    "width": 800,
    "height": 600,
    "aspect_ratio": 1.33,
    "total_pixels": 480000,
    "channels": 3
  },
  "exposure": {
    "mean_brightness": 120.5,
    "contrast": 65.2,
    "is_underexposed": false,
    "shadows_percentage": 25.3
  },
  "quality": {
    "sharpness_level": "æ¸…æ™°",
    "blur_score": 1250.8,
    "noise_level": 8.2
  },
  "lighting": {
    "light_direction": "å·¦ä¾§å…‰",
    "color_temperature": "æš–è‰²è°ƒ",
    "has_strong_shadows": true
  },
  "composition": {
    "main_subject_area": "middle_center",
    "visual_center": [400, 300],
    "has_horizon": true,
    "is_symmetric": false
  }
}
```

#### `generate_guidance(image_path, scene_type, user_intent)`
ç”Ÿæˆå®Œæ•´çš„æ‹æ‘„æŒ‡å¯¼å»ºè®®

**å‚æ•°:**
- `image_path`: å›¾ç‰‡æ–‡ä»¶è·¯å¾„
- `scene_type`: åœºæ™¯ç±»å‹ï¼ˆ"äººåƒ"/"é£æ™¯"/"ç¾é£Ÿ"/"å»ºç­‘"/"é€šç”¨"ï¼‰
- `user_intent`: ç”¨æˆ·æ‹æ‘„æ„å›¾ï¼ˆå¯é€‰ï¼‰

**è¿”å›æ ¼å¼:**
```json
{
  "technical_analysis": {...},
  "basic_suggestions": [
    "å…‰çº¿ä¸è¶³ï¼Œå»ºè®®å¯»æ‰¾æ›´äº®çš„æ‹æ‘„ä½ç½®",
    "ä¸»ä½“åå·¦ï¼Œå»ºè®®å‘å³ç§»åŠ¨2æ­¥"
  ],
  "ai_suggestions": {
    "position_adjustments": ["å‘å‰èµ°1æ­¥", "è¹²ä¸‹30cm"],
    "angle_adjustments": ["æ‰‹æœºå‘ä¸Šå€¾æ–œ15åº¦"],
    "technical_settings": ["å¼€å¯äººåƒæ¨¡å¼"],
    "composition_tips": ["å°†ä¸»ä½“æ”¾åœ¨å³ä¾§ä¸‰åˆ†çº¿ä¸Š"]
  },
  "scene_type": "äººåƒ",
  "timestamp": "2024-01-15T10:30:00"
}
```

### ReactNativeInterface ç±»

#### `analyze_camera_frame(base64_image, scene_type)`
åˆ†æReact Nativeä¼ æ¥çš„base64å›¾ç‰‡

#### `get_scene_specific_tips(scene_type)`
è·å–ç‰¹å®šåœºæ™¯çš„æ‹æ‘„æŠ€å·§

## åœºæ™¯ç±»å‹è¯´æ˜

### äººåƒæ‹æ‘„
- é‡ç‚¹å…³æ³¨çœ¼éƒ¨å¯¹ç„¦
- ä¼˜åŒ–é¢éƒ¨å…‰çº¿
- èƒŒæ™¯è™šåŒ–æ•ˆæœ
- é¿å…ä¸å½“è§’åº¦

### é£æ™¯æ‹æ‘„  
- ä¸‰åˆ†æ³•æ„å›¾
- åœ°å¹³çº¿æ°´å¹³å¯¹é½
- å‰ä¸­åæ™¯å±‚æ¬¡
- é»„é‡‘æ—¶é—´å…‰çº¿

### ç¾é£Ÿæ‹æ‘„
- 45åº¦ä¿¯æ‹è§’åº¦
- è‰²å½©æ­é…åè°ƒ
- è‡ªç„¶å…‰çº¿åˆ©ç”¨
- é“å…·å±‚æ¬¡æ„Ÿ

### å»ºç­‘æ‹æ‘„
- é€è§†çº¿æ¡æ§åˆ¶
- å¯¹ç§°æ€§æ„å›¾
- ç‹¬ç‰¹è§†è§’å¯»æ‰¾
- å…‰å½±æ•ˆæœåˆ©ç”¨

## æŠ€æœ¯å‚æ•°è¯¦è§£

### æ›å…‰åˆ†æ
- **å¹³å‡äº®åº¦**: 0-255èŒƒå›´ï¼Œ120-180ä¸ºæ­£å¸¸
- **åŠ¨æ€èŒƒå›´**: ç”»é¢æœ€äº®å’Œæœ€æš—åŒºåŸŸçš„å·®å€¼
- **é˜´å½±/ä¸­é—´è°ƒ/é«˜å…‰æ¯”ä¾‹**: äº®åº¦åˆ†å¸ƒç»Ÿè®¡
- **æ¬ æ›/è¿‡æ›æ£€æµ‹**: è‡ªåŠ¨åˆ¤æ–­æ›å…‰é—®é¢˜

### æ„å›¾åˆ†æ
- **è§†è§‰é‡å¿ƒ**: åŸºäºå›¾åƒå†…å®¹è®¡ç®—çš„å…´è¶£ä¸­å¿ƒ
- **ä¸‰åˆ†æ³•åˆ†æ**: ä¹å®«æ ¼åŒºåŸŸæ´»è·ƒåº¦
- **çº¿æ¡æ£€æµ‹**: æ°´å¹³çº¿ã€å‚ç›´çº¿æ•°é‡å’Œä½ç½®
- **å¯¹ç§°æ€§**: æ°´å¹³å’Œå‚ç›´å¯¹ç§°åº¦è¯„åˆ†

### å…‰çº¿åˆ†æ
- **å…‰çº¿æ–¹å‘**: é¡¶å…‰/ä¾§å…‰/åº•å…‰/å‡åŒ€å…‰
- **è‰²æ¸©ä¼°è®¡**: æš–è‰²è°ƒ/å†·è‰²è°ƒ/ä¸­æ€§è‰²è°ƒ
- **é˜´å½±åˆ†æ**: é˜´å½±åŒºåŸŸåˆ†å¸ƒå’Œå¼ºåº¦
- **é«˜å…‰æ£€æµ‹**: è¿‡æ›åŒºåŸŸè¯†åˆ«

## å¸¸è§é—®é¢˜

### Q: APIè°ƒç”¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®è®¾ç½®ï¼Œç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼ŒAPIé¢åº¦æ˜¯å¦å……è¶³ã€‚

### Q: å›¾ç‰‡åˆ†æé€Ÿåº¦è¾ƒæ…¢ï¼Ÿ
A: å¯ä»¥å‹ç¼©å›¾ç‰‡å°ºå¯¸ï¼Œæ¨è1024x768ä»¥ä¸‹ï¼›æˆ–ä½¿ç”¨è¾ƒå¿«çš„ç¡¬ä»¶ã€‚

### Q: å»ºè®®ä¸å¤Ÿå‡†ç¡®ï¼Ÿ
A: ç¡®ä¿åœºæ™¯ç±»å‹é€‰æ‹©æ­£ç¡®ï¼Œå¯ä»¥æ·»åŠ ç”¨æˆ·æ„å›¾æè¿°æ¥æé«˜å‡†ç¡®æ€§ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„åœºæ™¯ç±»å‹ï¼Ÿ
A: åœ¨`ReactNativeInterface.get_scene_specific_tips()`ä¸­æ·»åŠ æ–°çš„åœºæ™¯å’Œå¯¹åº”æŠ€å·§ã€‚

## å¼€å‘å’Œæ‰©å±•

### æ·»åŠ æ–°çš„å›¾åƒåˆ†æåŠŸèƒ½
åœ¨`PhotoGuideAgent._analyze_*`æ–¹æ³•ä¸­æ·»åŠ æ–°çš„åˆ†æç®—æ³•

### æ‰©å±•æ‘„å½±çŸ¥è¯†åº“
å°†æ–°çš„æ‘„å½±ä¹¦ç±å†…å®¹è½¬æ¢ä¸ºJSONæ ¼å¼ï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•

### è‡ªå®šä¹‰å»ºè®®ç”Ÿæˆ
ä¿®æ”¹`_generate_basic_suggestions`æ–¹æ³•æ¥æ·»åŠ è‡ªå®šä¹‰è§„åˆ™

### ä¼˜åŒ–AIæç¤ºè¯
ç¼–è¾‘`_build_guidance_prompt`æ–¹æ³•æ¥æ”¹è¿›AIå»ºè®®è´¨é‡

## é¡¹ç›®æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ photo_guide_agent.py          # æ ¸å¿ƒAgentç±»
â”œâ”€â”€ config.py                     # é…ç½®æ–‡ä»¶
â”œâ”€â”€ test_opencv_analysis.py       # OpenCVæµ‹è¯•è„šæœ¬
â”œâ”€â”€ react_native_demo.py          # React Nativeæ¼”ç¤º
â”œâ”€â”€ example_usage.py              # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ requirements.txt              # Pythonä¾èµ–
â”œâ”€â”€ .env.example                  # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ USAGE.md                      # ä½¿ç”¨æŒ‡å—
â””â”€â”€ æ‘„å½±ä¹¦ç±JSONæ–‡ä»¶/             # æ‘„å½±çŸ¥è¯†åº“
```

## æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**: ä¸è¦å°†çœŸå®APIå¯†é’¥æäº¤åˆ°ä»£ç ä»“åº“
2. **å›¾ç‰‡éšç§**: æ³¨æ„ç”¨æˆ·å›¾ç‰‡æ•°æ®çš„éšç§ä¿æŠ¤
3. **æ€§èƒ½ä¼˜åŒ–**: å¤§é‡ä½¿ç”¨æ—¶è€ƒè™‘ç¼“å­˜å’Œæ‰¹å¤„ç†
4. **é”™è¯¯å¤„ç†**: ç½‘ç»œå¼‚å¸¸å’ŒAPIé™åˆ¶çš„ä¼˜é›…å¤„ç†
5. **ç”¨æˆ·ä½“éªŒ**: æä¾›åŠ è½½çŠ¶æ€å’Œå¤±è´¥é‡è¯•æœºåˆ¶

## æ”¯æŒå’Œè´¡çŒ®

å¦‚é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿æäº¤Issueæˆ–Pull Requestã€‚

---

**ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2024å¹´1æœˆ